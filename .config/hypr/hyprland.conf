# vim:fileencoding=utf-8:foldmethod=marker

# If you loaded up my config or read it and are not satisfied,
# Heres the default hyprland.conf for you:
# https://raw.githubusercontent.com/hyprwm/Hyprland/main/example/hyprland.conf

# Monitors {{{
# https://wiki.hyprland.org/Configuring/Monitors/

monitor=DP-2,preferred,1680x50,auto
monitor=DP-3,preferred,0x0,auto
# }}}
# Exec Once {{{

exec-once = waybar
exec-once = swww init; ~/.config/hypr/scripts/wall/set.sh $(< ~/.cache/wallpaper_path)
exec-once = mpd-mpris
# exec-once = swaybg -m fill -i $(cat ~/.cache/wallpaper_path)
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /home/nima/.config/hypr/scripts/portal.sh
exec-once = wl-paste --type text --watch cliphist store #Stores only text data
exec-once = wl-paste --type image --watch cliphist store #Stores only image data
exec-once = unclutter -n 2
exec-once = calcurse --daemon
exec-once = killall mako; mako
# }}}
# Variables {{{
# https://wiki.hyprland.org/Configuring/Variables/

$mainMod = SUPER
$left = h
$right = l
$down = j
$up = k
$playerctl = playerctl -p $(< /tmp/player)
$rofiend = hyprctl dispatch submap reset
# $TERM = KITTY_DISABLE_WAYLAND=1 kitty
$TERM = alacritty
# }}}
# Input {{{
input {
    kb_layout = us, ir
    kb_variant = altgr-intl
    kb_model =
    kb_options = grp:alt_shift_toggle
    kb_rules =

    follow_mouse = 1
    touchpad {
        natural_scroll = no
    }
    force_no_accel = true
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}
# }}}
# General {{{

general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    # include colors
    source = ~/.cache/wal/colors-hypr.conf
    layout = master
}
# }}}
# Decoration {{{

decoration {
    rounding = 8
    blur = yes
    blur_size = 5
    blur_passes = 2
    blur_new_optimizations = yes

    drop_shadow = yes
    shadow_range = 30
    shadow_render_power = 15
    col.shadow = rgba(00000070)
}
# }}}
# Misc {{{

misc {
    disable_hyprland_logo = 1
    disable_splash_rendering = 1
    focus_on_activate = 1
    animate_manual_resizes = true
}
gestures {
    workspace_swipe = true
}
# }}}
# Animations {{{
# https://hyprland.org/Configuring/Animations/

animations {
    enabled = yes
    bezier = myBezier, 0.05, 0.9, 0.1, 1.00
    # animation = windows, 1, 5, default
    animation = windowsIn, 1, 5, myBezier
    animation = windowsMove, 1, 5, myBezier
    animation = windowsOut, 1, 5, myBezier
    animation = border, 1, 5, default
    animation = fade, 1, 5, default
    animation = workspaces, 1, 5, myBezier
}
# }}}
# Dwindle {{{
# https://wiki.hyprland.org/Configuring/Dwindle-Layout/

dwindle {
    pseudotile = yes 
    preserve_split = yes 
    # use_active_for_splits = yes
    # no_gaps_when_only = yes
    force_split = -1
}
# }}}
# Master {{{
# https://wiki.hyprland.org/Configuring/Master-Layout/

master {
    new_is_master = true
    new_on_top = true
    # no_gaps_when_only = true
}
# }}}
# Window Rules {{{
# https://wiki.hyprland.org/Configuring/Window-Rules/

# Move all to workspace 12
windowrulev2 = workspace 12,class:^(?!.*(Pinentry-gtk-2)|(dragon-drop)|(hyprland-share-picker)|(qalculate-gtk)|(Rofi)|(kitty)|(st-256color)$).+$

# Floated by default
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = size 800 675, class:^(pavucontrol)$
# windowrulev2 = float, class:^(qalculate-gtk)$
# windowrulev2 = pin, class:^(qalculate-gtk)$
windowrulev2 = workspace special, class:^(qalculate-gtk)$

# Move to workspaces
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = tile, class:^(Alacritty)$
windowrulev2 = workspace 1,class:^(Alacritty)|(kitty)|(st-256color)$,title:^(zsh)|(st)|(Alacritty)$
windowrulev2 = workspace 2,class:^(firefox)|(Chromium)|(chromium)$
windowrulev2 = workspace 3,class:^(Alacritty)|(kitty)|(st-256color)$,title:^(ncmpcpp)$
windowrulev2 = workspace 4,class:^(WebCord)|(Telegram-desktop)|(org.telegram.desktop)|(discord)$
windowrulev2 = workspace 5,class:^(Alacritty)|(kitty)|(st-256color)$,title:^(NVIM)|(lvim)
windowrulev2 = workspace 5,class:^(obsidian)|(code-oss)|(gedit)|(Emacs)|(org.qt-project.qtcreator)$
windowrulev2 = workspace 6,class:^(mpv)$
windowrulev2 = workspace 8,class:^(Alacritty)|(kitty)|(st-256color)$,title:^(ranger)|(nnn)$
windowrulev2 = workspace 9,class:^(virt-manager)$
windowrulev2 = workspace 7,class:^(org.pwmt.zathura)|(Zathura)$
windowrulev2 = workspace 10,class:^(xournalpp)$
windowrulev2 = workspace 13,class:^(lutris)|(Steam)$
windowrulev2 = workspace 13,class:(\.exe)$

# Firefox Picture-in-picture
windowrulev2 = float, class:^(firefox)$, title:^(Picture-in-picture)$
windowrulev2 = move 10 830, class:^(firefox)$, title:^(Picture-in-picture)$
windowrulev2 = size 427 240, class:^(firefox)$, title:^(Picture-in-picture)$
windowrulev2 = pin, class:^(firefox)$, title:^(Picture-in-picture)$
# }}}
# Submaps {{{
# http://wiki.hyprland.org/Configuring/Binds/#submaps

# Group 

submap=group
    # Into
    bind = , $left, moveintogroup, l
    bind = , $right, moveintogroup, r
    bind = , $up, moveintogroup, u
    bind = , $down, moveintogroup, d
    # Out of
    bind = SHIFT, $left, moveoutofgroup, l
    bind = SHIFT, $right, moveoutofgroup, r
    bind = SHIFT, $up, moveoutofgroup, u
    bind = SHIFT, $down, moveoutofgroup, d
    # Reset
    bind = $mainMod, G, submap, reset
    bind = ,escape, submap, reset
    bind=,enter,submap,reset
submap=reset

# Rofi (Ofc)
submap=rofi
    # Unbind mainMod focus
    unbind = $mainMod, $left
    unbind = $mainMod, $right
    unbind = $mainMod, $up
    unbind = $mainMod, $down
    # Reset
    bind = $mainMod, D, exec, killall rofi
    bind=,escape,exec, killall rofi
    bind = $mainMod, D, submap, reset
    bind=,escape,submap,reset
    # Bind for screenshot
    # Snap (Kinda Screeshot?)
    bind = $mainMod SHIFT, S, exec, grim -g "$(slurp)" - | wl-copy
    bind = $mainMod, S, exec, grim -g "$(slurp)" - | wl-copy

    # Screenshot
    bind = , Print, exec, grim -c -o DP-2 - | wl-copy
    bind = SHIFT, Print, exec, grim -c -o DP-3 - | wl-copy
    bind = CONTROL SHIFT, Print, exec, grim - | wl-copy
submap=reset

# Move (floating)
submap=move
    # Normal
    binde = , $left, moveactive, -10 0
    binde = , $right, moveactive, 10 0
    binde = , $up, moveactive, 0 -10
    binde = , $down, moveactive, 0 10
    # Fast
    binde = SHIFT, $left, moveactive, -50 0
    binde = SHIFT, $right, moveactive, 50 0
    binde = SHIFT, $up, moveactive, 0 -50
    binde = SHIFT, $down, moveactive, 0 50
    # Slow
    binde = CONTROL, $left, moveactive, -5 0
    binde = CONTROL, $right, moveactive, 5 0
    binde = CONTROL, $up, moveactive, 0 -5
    binde = CONTROL, $down, moveactive, 0 5
    # Reset
    bind=,escape,submap,reset
    bind=,enter,submap,reset
    bind = $mainMod, M, submap, reset
submap=reset

# Resize 
submap=resize
    # Normal
    binde = ,$left, resizeactive, -10 0
    binde = ,$right, resizeactive, 10 0
    binde = ,$up, resizeactive, 0 -10
    binde = ,$down, resizeactive, 0 10
    # Fast
    binde = SHIFT ,$left, resizeactive, -50 0
    binde = SHIFT ,$right, resizeactive, 50 0
    binde = SHIFT ,$up, resizeactive, 0 -50
    binde = SHIFT ,$down, resizeactive, 0 50
    # Slow
    binde = CONTROL ,$left, resizeactive, -5 0
    binde = CONTROL ,$right, resizeactive, 5 0
    binde = CONTROL ,$up, resizeactive, 0 -5
    binde = CONTROL ,$down, resizeactive, 0 5
    # Reset
    bind=,escape,submap,reset
    bind=,enter,submap,reset
    bind = $mainMod, R, submap, reset
submap=reset
# }}}
# Binds {{{
# https://wiki.hyprland.org/Configuring/Binds/

# Applications
bind = $mainMod, RETURN, exec, $TERM
bind = $mainMod CTRL, RETURN,layoutmsg, focusmaster
bind = $mainMod SHIFT, RETURN, exec,$TERM -T lvim -e /home/nima/.local/bin/lvim
bind = $mainMod ALT , RETURN, layoutmsg, swapwithmaster master
bind = $mainMod, Q, killactive, 
bind = $mainMod SHIFT, q, exit, 
bind = $mainMod SHIFT, E, exec, st -t "ranger" -e ranger 
bind = $mainMod, E, exec, $TERM -T nnn -e zsh ~/Scripts/nnn-w
# hyprpicker
bind = $mainMod SHIFT, C, exec, hyprpicker | tr -d '\n'| wl-copy 

# Layouts
bind = $mainMod, space, togglefloating, 
bind = $mainMod SHIFT, space, pin, active
bind = $mainMod, bracketleft, pseudo, # dwindle
bind = $mainMod, W, togglegroup, # dwindle
bind = $mainMod, Z, lockgroups, unlock # dwindle
bind = $mainMod, A, lockgroups, lock # dwindle
bind = $mainMod, E, togglesplit, # dwindle

# Snap (Kinda Screeshot?)
bind = $mainMod SHIFT, S, exec, grim -g "$(slurp)" - | wl-copy
bind = $mainMod, S, exec, grim -g "$(slurp)" - | wl-copy

# Screenshot
bind = , Print, exec, grim -o DP-3 - | wl-copy
bind = SHIFT, Print, exec, grim -o DP-2 - | wl-copy
bind = CONTROL SHIFT, Print, exec, grim - | wl-copy

# Hide waybar
bind = $mainMod, B, exec, killall -SIGUSR1 waybar

# Restart waybar
bind = $mainMod ALT, B, exec, ps x | pgrep ".*jdate-inside.sh" | while read -r line; do kill "$line"; done; killall waybar; waybar

# Fullscreen toggle
bind = $mainMod, F, fullscreen, 1
bind = $mainMod SHIFT, F, fullscreen, 0

# Pin a window
bind = $mainMod, Y, pin,

# Group (tabbed)
bind = $mainMod, G, submap, group
bind = $mainMod, left, changegroupactive, b
bind = $mainMod, right, changegroupactive, f

bind = $mainMod SHIFT, left, moveintogroup, l
bind = $mainMod SHIFT, right, moveintogroup, r
bind = $mainMod SHIFT, up, moveintogroup, u
bind = $mainMod SHIFT, down, moveintogroup, d

# Move active window with vi keybinds
bind = $mainMod SHIFT, $left, movewindow, l
bind = $mainMod SHIFT, $right, movewindow, r
bind = $mainMod SHIFT, $up, movewindow, u
bind = $mainMod SHIFT, $down, movewindow, d

# Resize mode
bind=$mainMod,R,submap,resize

# Move mode
bind = $mainMod, M, submap, move

# Move workspace to monitor
bind = $mainMod CONTROL, $left, movecurrentworkspacetomonitor, +1
bind = $mainMod CONTROL, $right, movecurrentworkspacetomonitor, +1

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10
bind = $mainMod, minus, workspace, 11
bind = $mainMod, equal, workspace, 12
bind = $mainMod, BackSpace, workspace, 13
bind = $mainMod, backslash, workspace, 14

bind = $mainMod ALT,J,exec, ~/Scripts/workspaceselector.sh; $rofiend
bind = $mainMod ALT,J,submap, rofi
 
# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10
bind = $mainMod SHIFT, minus, movetoworkspace, 11
bind = $mainMod SHIFT, equal, movetoworkspace, 12
bind = $mainMod SHIFT, BackSpace, movetoworkspace, 13
bind = $mainMod SHIFT, backslash, movetoworkspace, 14

# speical workspace
bind = $mainMod SHIFT, P, movetoworkspace, special
bind = $mainMod, P, togglespecialworkspace

# Scroll through existing workspaces with mainMod + scroll
binde = $mainMod, mouse_down, workspace, e-1
binde= $mainMod SHIFT, Z, workspace, e-1
binde= $mainMod, mouse_up, workspace, e+1
binde= $mainMod SHIFT, X, workspace, e+1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Rofi wallpaper menu
bind = ALT,P,exec, ~/.config/hypr/scripts/wall/rofi-selector.sh; $rofiend
bind = ALT,P, submap, rofi

# Rofi powermenu
bind = ALT, Q, exec,rofi -show powermenu -modi powermenu:~/Scripts/rofi-power-menu; $rofiend
bind = ALT, Q, submap, rofi

# Music
bind=ALT, I, exec,$playerctl play-pause
bind=ALT, L, exec,$playerctl next
bind=ALT, H, exec,$playerctl previous
# bind=ALT, K, exec,player -p
# bind=ALT, J, exec,player -n
bind=ALT, semicolon, exec, ~/.config/hypr/scripts/rofi-playerctl.sh; $rofiend
bind = ALT, semicolon, submap, rofi
bind=ALT, U, exec,$TERM -T ncmpcpp -e ncmpcpp

# Media keys
bind=,XF86AudioPlay,exec,$playerctl play-pause
bind=,XF86AudioPrev,exec,$playerctl previous
bind=,XF86AudioNext,exec,$playerctl next
bindl=,XF86AudioMedia,exec,$playerctl play-pause
bindl=,XF86AudioStop,exec,$playerctl stop
# bindle=,XF86AudioRaiseVolume,exec,
# bindle=,XF86AudioLowerVolume,exec,
# bindle=,XF86AudioMute,exec,

# Calculator
bind=,XF86Calculator,exec,qalculate-gtk

# Warpd (control mouse via keyboard)
bind=$mainMod CTRL SHIFT, h, exec, warpd --hint; killall warpd

# Spawn rofi
bind = ALT, D, exec,rofi -auto-select -normal-window -show drun; $rofiend
bind = ALT, D, submap, rofi

# Move focus with vi keybinds
bind = $mainMod ALT, $left, movefocus, l
bind = $mainMod ALT, $right, movefocus, r
bind = $mainMod, N, cyclenext
# bind = $mainMod, $up, movefocus, u
# bind = $mainMod, $down, movefocus, d
bind = $mainMod, $left, focusmonitor, +1
bind = $mainMod, $right, focusmonitor, -1
binde = $mainMod, $up, layoutmsg, cycleprev
binde = $mainMod, $down, layoutmsg, cyclenext

bind = $mainMod, D, layoutmsg, removemaster
bind = $mainMod, I, layoutmsg, addmaster

# Spawn rofi clipboard manager
bind = SUPER, C, exec, cliphist list | rofi -dmenu -window-title ""| cliphist decode | wl-copy; $rofiend
bind = SUPER, C, submap, rofi

# Toggle microphone
bind = $mainMod SHIFT, A, exec, ~/.config/hypr/scripts/microphone-toggle.sh

# Dismiss/Disable notifications
bind = $mainMod, period, exec, makoctl dismiss -a
bind = $mainMod, comma, exec, ~/.config/hypr/scripts/mako-toggle-mode.sh dnd
bind = $mainMod SHIFT, comma, exec, ~/.config/hypr/scripts/mako-toggle-mode.sh stream
# }}}
# Keywords {{{
# https://wiki.hyprland.org/Configuring/Keywords/

blurls = rofi
# }}}
